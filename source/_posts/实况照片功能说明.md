---
title: 实况照片功能说明
abbrlink: 34037
date: 2025-09-14 22:22:00
published: false
---

# 实况照片功能使用说明

## 功能概述

实况照片功能支持在相册中展示苹果设备拍摄的Live Photo（实况照片），为博客相册增加动态效果，提升用户体验。

## 功能特性

### 🎬 实况照片核心功能
- ✅ 支持苹果设备Live Photo格式
- ✅ 点击播放动态效果
- ✅ 自动播放控制（可自定义时长）
- ✅ 播放进度条显示
- ✅ LIVE指示器动画效果
- ✅ 响应式设计，支持移动端
- ✅ 暗色主题适配
- ✅ PJAX兼容无刷新加载
- ✅ 向下兼容传统图片格式

### 🤖 自动封面提取
- ✅ **第一帧封面**：自动使用视频第一帧作为封面，简单高效
- ✅ **即点即播**：点击封面直接播放实况照片
- ✅ **智能优化**：自动调整封面尺寸和压缩比例
- ✅ **用户可选**：保留手动设置封面的选项
- ✅ **快速加载**：无需复杂分析，封面生成速度更快

## 配置方法

### 1. 相册配置文件

在 `source/_data/album.yml` 中添加实况照片配置：

```yaml
- class_name: 实况照片 # 相册分类名称
  path_name: /livePhotos # 相册路径
  type: 1 # 相册类型，1为普通相册，2为瀑布流相册
  description: 苹果设备拍摄的实况照片，记录生活中的动态瞬间。 # 相册描述
  cover: https://example.com/cover.jpg # 相册封面
  top_background: https://example.com/bg.jpg # 顶部背景图
  top_link: /album # 返回链接
  top_btn_text: 返回 # 返回按钮文本
  album_list: # 相册列表
    - date: 2024-01-15 # 图片日期
      content: 春天的樱花盛开瞬间 # 图片内容描述
      address: 北京朝阳公园 # 图片地点
      from: iPhone 15 Pro # 图片来源
      live_photo: # 实况照片配置
        enable: true # 启用实况照片
        still_image: https://example.com/cherry_blossom_still.jpg # 静态图片（后备封面）
        video: https://example.com/cherry_blossom_live.mov # 实况视频
        duration: 3 # 视频时长（秒）
        # poster: https://example.com/poster.jpg # 自定义封面（可选，不设置时自动使用视频第一帧）
      image: # 传统图片列表（兼容性保留）
        - https://example.com/cherry_blossom_still.jpg
```

### 2. 创建相册页面

在 `source/livePhotos/` 目录下创建 `index.md` 文件：

```markdown
---
title: 实况照片
date: 2024-01-15 15:57:51
aside: false
top_img: false
type: "album_detail"
---
```

## 配置参数说明

### live_photo 配置项

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| enable | boolean | 是 | 是否启用实况照片功能 |
| still_image | string | 是 | 静态图片URL（后备封面） |
| video | string | 是 | 实况视频URL（支持.mov, .mp4格式） |
| duration | number | 否 | 视频播放时长（秒），默认3秒 |
| poster | string | 否 | 自定义封面图URL，不设置时自动使用视频第一帧 |
| play_mode | string | 否 | 播放模式："hover"(悬停播放) 或 "press"(长按播放)，默认"hover" |
| show_progress | boolean | 否 | 是否显示进度条，设置为true显示，false或不设置则隐藏 |
| press_delay | number | 否 | 长按延迟时间（毫秒），仅在press模式下生效，默认300ms |

### 封面显示优先级

1. **自定义封面优先**：如果设置了 `poster` 字段，将使用自定义封面
2. **第一帧自动提取**：如果未设置 `poster`，自动使用视频第一帧作为封面
3. **静态图片后备**：如果第一帧提取失败，使用 `still_image` 作为封面

## 使用方式

### 配置示例

**基础配置**（推荐）：
```yaml
live_photo:
  enable: true
  still_image: "静态图片URL"  # 后备封面
  video: "视频URL"
  duration: 3
  # 不设置poster，系统自动使用视频第一帧作为封面
```

**完整配置示例**：
```yaml
live_photo:
  enable: true
  still_image: "静态图片URL"  # 后备封面
  video: "视频URL"
  duration: 3
  poster: "自定义封面URL"  # 可选：自定义封面
  play_mode: "press"  # 播放模式：hover 或 press
  show_progress: false  # 是否显示进度条
  press_delay: 300  # 长按延迟（毫秒）
```

**进度条控制配置**：
```yaml
# 显示进度条
live_photo:
  show_progress: true
  
# 隐藏进度条（默认）
live_photo:
  show_progress: false
  # 或者不设置 show_progress 参数
```

### 桌面端
- 点击实况照片即可播放动态效果
- 播放时会显示进度条和LIVE指示器
- 自动在指定时长后停止播放

### 移动端
- 点击播放，支持触摸交互
- 长按开始播放，松开停止（类似iOS原生体验）
- 响应式布局适配不同屏幕尺寸

## 文件格式支持

### 视频格式
- ✅ MP4 (推荐)
- ✅ MOV (苹果原生格式)
- ✅ WebM (现代浏览器支持)

### 图片格式
- ✅ JPG/JPEG
- ✅ PNG
- ✅ WebP

## 兼容性说明

- 如果不配置 `live_photo` 字段，将自动使用传统的 `image` 字段显示静态图片
- 支持在同一相册中混合使用实况照片和传统图片
- 向下兼容现有的相册配置

## 性能优化

- 视频采用懒加载，仅在需要时加载
- 支持视频预加载控制
- 自动停止播放以节省资源
- 同时只能播放一个实况照片

## 故障排除

### 实况照片无法播放
1. 检查视频URL是否可访问
2. 确认视频格式是否支持
3. 检查浏览器控制台是否有错误信息

### 样式显示异常
1. 确认CSS文件已正确引入
2. 检查是否有CSS冲突
3. 清除浏览器缓存后重试

### JavaScript功能失效
1. 确认JS文件已正确引入
2. 检查浏览器控制台是否有JavaScript错误
3. 确认PJAX配置正确

## 更新日志

### v1.0.0 (2024-01-15)
- ✨ 新增实况照片功能
- ✨ 支持点击播放/暂停
- ✨ 添加播放进度条
- ✨ 支持移动端触摸交互
- ✨ 暗色主题适配
- ✨ PJAX兼容性支持
- ✨ 自动第一帧封面提取
- ✨ 响应式设计优化

---

如有问题或建议，请在GitHub Issues中反馈。