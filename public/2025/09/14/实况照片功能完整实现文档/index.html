<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>实况照片功能完整实现文档 | 🐱</title><meta name="keywords" content="实况照片,JavaScript,Hexo,AnZhiYu主题"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="实况照片功能完整实现文档"><meta name="application-name" content="实况照片功能完整实现文档"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="实况照片功能完整实现文档"><meta property="og:url" content="http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/index.html"><meta property="og:site_name" content="🐱"><meta property="og:description" content="实况照片功能完整实现文档1. 功能概述1.1 项目背景实况照片功能是为AnZhiYu主题开发的一个增强功能，旨在支持苹果设备拍摄的Live Photo在网页端的展示和交互。该功能经历了从基础版本到完整优化版本的迭代开发。 1.2 功能演进历程版本1.0 - 基础实况照片功能 核心功能: 支持实况照片"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F"><meta property="article:author" content="John Doe"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F"><meta name="description" content="实况照片功能完整实现文档1. 功能概述1.1 项目背景实况照片功能是为AnZhiYu主题开发的一个增强功能，旨在支持苹果设备拍摄的Live Photo在网页端的展示和交互。该功能经历了从基础版本到完整优化版本的迭代开发。 1.2 功能演进历程版本1.0 - 基础实况照片功能 核心功能: 支持实况照片"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: undefined,
  algolia: {"appId":"3IWIWZQLPS","apiKey":"c7f91c77960bfa0eb9a1e3a7dda4f795","indexName":"blog-wenroumao","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: John Doe","link":"链接: ","source":"来源: 🐱","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '🐱',
  title: '实况照片功能完整实现文档',
  postAI: '',
  pageFillDescription: '实况照片功能完整实现文档, 1. 功能概述, 1.1 项目背景, 1.2 功能演进历程, 版本1.0 - 基础实况照片功能, 版本2.0 - 长按播放优化, 版本3.0 - 加载优化, 1.3 功能模块详解, 1.3.1 核心播放引擎, 1.3.2 智能封面系统, 1.3.3 交互控制系统, 1.3.4 进度显示系统, 2. 分步安装指南, 2.1 环境准备, 2.1.1 基础环境要求, 2.1.2 检查环境, 2.2 依赖项安装, 2.2.1 核心依赖, 2.2.2 主题依赖确认, 2.3 配置文件设置, 2.3.1 创建相册配置文件, 2.3.2 创建页面文件, 3. 完整部署流程, 3.1 文件部署步骤, 步骤1 复制JavaScript文件, 步骤2 复制CSS样式文件, 步骤3 更新模板文件, 步骤4 更新JavaScript引入, 3.2 资源文件准备, 3.2.1 创建媒体文件目录, 3.2.2 准备媒体文件, 3.3 可能出现的问题及解决方案, 问题1 视频无法播放, 问题2 首次加载不显示, 问题3 移动端触摸无效, 问题4 进度条不显示, 4. 代码部署说明, 4.1 代码结构解析, 4.2 关键配置参数说明, 4.2.1 基础配置参数, 4.2.2 交互配置参数, 4.2.3 高级配置参数, 4.3 JavaScript API说明, 4.3.1 全局对象, 4.3.2 事件监听, 4.4 CSS类名说明, 4.4.1 容器类名, 4.4.2 控制元素类名, 4.4.3 状态类名, 4.5 测试和验证方法, 4.5.1 功能测试清单, 4.5.2 性能测试, 4.5.3 兼容性测试, 4.5.4 调试方法, 5. 高级配置和自定义, 5.1 自定义样式, 5.1.1 修改进度条样式, 5.1.2 自定义长按提示, 5.2 扩展功能开发, 5.2.1 添加音频支持, 5.2.2 添加全屏播放, 6. 维护和更新, 6.1 版本更新流程, 6.2 常见维护任务, 6.3 故障排除工具, 7. 总结实况照片功能完整实现文档功能概述项目背景实况照片功能是为主题开发的一个增强功能旨在支持苹果设备拍摄的在网页端的展示和交互该功能经历了从基础版本到完整优化版本的迭代开发功能演进历程版本基础实况照片功能核心功能支持实况照片的基本播放交互方式鼠标悬停播放显示效果进度条显示播放进度智能封面自动提取视频首帧作为封面版本长按播放优化双模式支持悬停模式长按模式可配置进度条支持显示隐藏进度条自定义延迟可配置长按触发延迟时间移动端适配完整的触摸事件支持优化长按提示视觉反馈等版本加载优化多重初始化解决首次加载适配问题动态内容支持监听变化性能优化防重复初始化错误处理稳定性提升多种加载时机适配功能模块详解核心播放引擎存储所有实况照片容器初始化功能作用管理所有实况照片实例提供统一的初始化和控制接口智能封面系统自动提取视频首帧作为封面处理视频加载失败的降级方案作用自动提取视频首帧确保封面图片的一致性和美观度交互控制系统悬停播放逻辑长按播放逻辑作用根据配置提供不同的交互方式适应不同使用场景进度显示系统创建和控制进度条显示作用可配置的进度条显示提供视觉反馈分步安装指南环境准备基础环境要求版本版本主题最新版本浏览器支持的现代浏览器检查环境检查版本检查版本检查主题版本依赖项安装核心依赖实况照片功能基于原生开发无需额外安装包主题依赖确认确保主题已正确安装进入博客根目录检查主题文件配置文件设置创建相册配置文件在中添加实况照片配置实况照片展示支持苹果的动态展示春日樱花盛开或或毫秒夕阳西下美景创建页面文件在中创建页面实况照片完整部署流程文件部署步骤步骤复制文件将复制到主题目录步骤复制样式文件将复制到主题目录步骤更新模板文件编辑添加实况照片支持正在提取封面步骤更新引入编辑添加实况照片功能资源文件准备创建媒体文件目录创建实况照片资源目录准备媒体文件静态图片格式建议尺寸或视频文件格式时长秒建议码率适中文件命名使用有意义的名称如和可能出现的问题及解决方案问题视频无法播放现象实况照片显示静态图片但无法播放视频原因视频文件路径错误或格式不支持解决方案检查文件是否存在检查视频格式问题首次加载不显示现象需要刷新页面才能正常显示原因初始化时机问题解决方案已在版本中修复确保使用最新版本的问题移动端触摸无效现象在移动设备上无法触发播放原因触摸事件绑定问题解决方案检查中的属性设置问题进度条不显示现象配置了但进度条不显示原因样式冲突或配置读取错误解决方案在浏览器控制台检查配置代码部署说明代码结构解析核心文件样式文件页面模板引入配置文件媒体资源目录页面文件关键配置参数说明基础配置参数是否启用实况照片静态图片路径视频文件路径播放时长秒交互配置参数播放模式是否显示进度条长按延迟毫秒高级配置参数自定义封面可选视频预加载策略是否循环播放说明全局对象全局实况照片对象手动刷新所有实况照片销毁所有实况照片事件监听页面切换事件页面加载完成事件类名说明容器类名主容器内容包装器静态图片视频元素控制元素容器控制元素类名播放按钮标识进度条封面状态提示状态类名播放状态加载状态错误状态测试和验证方法功能测试清单静态图片正常显示悬停长按触发播放视频播放流畅进度条显示正确移动端触摸正常页面切换后功能正常多个实况照片同时工作性能测试检查内存使用检查加载时间兼容性测试桌面端移动端调试方法开启调试模式查看容器信息检查配置读取配置高级配置和自定义自定义样式修改进度条样式自定义长按提示长按播放自定义样式扩展功能开发添加音频支持在方法中添加同步音频播放添加全屏播放添加全屏播放功能维护和更新版本更新流程备份现有文件下载新版本文件对比配置差异更新文件并测试部署到生产环境常见维护任务定期检查媒体文件完整性监控页面加载性能更新浏览器兼容性优化媒体文件大小故障排除工具实况照片诊断工具容器总结实况照片功能为主题提供了丰富的媒体展示能力通过合理的配置和部署可以为用户带来优秀的视觉体验本文档涵盖了从基础安装到高级自定义的完整流程确保开发者能够顺利部署和维护该功能如有问题请参考故障排除章节或查看项目的仓库获取最新信息',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-15 21:07:40',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="安知鱼图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">🐱</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=2887240194&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/1-X/" style="font-size: 1.05rem;">1+X<sup>3</sup></a><a href="/tags/1x/" style="font-size: 1.05rem;">1x<sup>3</sup></a><a href="/tags/AnZhiYu%E4%B8%BB%E9%A2%98/" style="font-size: 1.05rem;">AnZhiYu主题<sup>1</sup></a><a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 1.05rem;">CSS动画<sup>1</sup></a><a href="/tags/CSS%E7%89%B9%E6%95%88/" style="font-size: 1.05rem;">CSS特效<sup>1</sup></a><a href="/tags/DW/" style="font-size: 1.05rem;">DW<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>2</sup></a><a href="/tags/Typora/" style="font-size: 1.05rem;">Typora<sup>1</sup></a><a href="/tags/%E5%85%89%E7%BA%BF%E6%8A%98%E5%B0%84/" style="font-size: 1.05rem;">光线折射<sup>1</sup></a><a href="/tags/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E4%B8%8E%E8%A1%A5%E7%A0%81/" style="font-size: 1.05rem;">原码、反码与补码<sup>1</sup></a><a href="/tags/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87/" style="font-size: 1.05rem;">实况照片<sup>2</sup></a><a href="/tags/%E7%8E%BB%E7%92%83%E6%9D%90%E8%B4%A8/" style="font-size: 1.05rem;">玻璃材质<sup>1</sup></a><a href="/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/" style="font-size: 1.05rem;">用户体验<sup>2</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1/" style="font-size: 1.05rem;">网页设计<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C/" style="font-size: 1.05rem;">视觉效果<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E7%89%B9%E6%95%88/" style="font-size: 1.05rem;">视觉特效<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">计算机基础<sup>5</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 1.05rem;">软件<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url">技术文档</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>实况照片</span></a><a class="article-meta__tags" href="/tags/JavaScript/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaScript</span></a><a class="article-meta__tags" href="/tags/Hexo/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Hexo</span></a><a class="article-meta__tags" href="/tags/AnZhiYu%E4%B8%BB%E9%A2%98/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>AnZhiYu主题</span></a></span></div></div><h1 class="post-title" itemprop="name headline">实况照片功能完整实现文档</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-14T14:22:22.000Z" title="发表于 2025-09-14 22:22:22">2025-09-14</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-09-15T13:07:40.800Z" title="更新于 2025-09-15 21:07:40">2025-09-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="实况照片功能完整实现文档"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为大连"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>大连</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/"><header><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url">技术文档</a><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a><a href="/tags/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87/" tabindex="-1" itemprop="url">实况照片</a><a href="/tags/JavaScript/" tabindex="-1" itemprop="url">JavaScript</a><a href="/tags/Hexo/" tabindex="-1" itemprop="url">Hexo</a><a href="/tags/AnZhiYu%E4%B8%BB%E9%A2%98/" tabindex="-1" itemprop="url">AnZhiYu主题</a><h1 id="CrawlerTitle" itemprop="name headline">实况照片功能完整实现文档</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">John Doe</span><time itemprop="dateCreated datePublished" datetime="2025-09-14T14:22:22.000Z" title="发表于 2025-09-14 22:22:22">2025-09-14</time><time itemprop="dateCreated datePublished" datetime="2025-09-15T13:07:40.800Z" title="更新于 2025-09-15 21:07:40">2025-09-15</time></header><h1 id="实况照片功能完整实现文档"><a href="#实况照片功能完整实现文档" class="headerlink" title="实况照片功能完整实现文档"></a>实况照片功能完整实现文档</h1><h2 id="1-功能概述"><a href="#1-功能概述" class="headerlink" title="1. 功能概述"></a>1. 功能概述</h2><h3 id="1-1-项目背景"><a href="#1-1-项目背景" class="headerlink" title="1.1 项目背景"></a>1.1 项目背景</h3><p>实况照片功能是为AnZhiYu主题开发的一个增强功能，旨在支持苹果设备拍摄的Live Photo在网页端的展示和交互。该功能经历了从基础版本到完整优化版本的迭代开发。</p>
<h3 id="1-2-功能演进历程"><a href="#1-2-功能演进历程" class="headerlink" title="1.2 功能演进历程"></a>1.2 功能演进历程</h3><h4 id="版本1-0-基础实况照片功能"><a href="#版本1-0-基础实况照片功能" class="headerlink" title="版本1.0 - 基础实况照片功能"></a>版本1.0 - 基础实况照片功能</h4><ul>
<li><strong>核心功能</strong>: 支持实况照片的基本播放</li>
<li><strong>交互方式</strong>: 鼠标悬停播放</li>
<li><strong>显示效果</strong>: 进度条显示播放进度</li>
<li><strong>智能封面</strong>: 自动提取视频首帧作为封面</li>
</ul>
<h4 id="版本2-0-长按播放优化"><a href="#版本2-0-长按播放优化" class="headerlink" title="版本2.0 - 长按播放优化"></a>版本2.0 - 长按播放优化</h4><ul>
<li><strong>双模式支持</strong>: 悬停模式(hover) + 长按模式(press)</li>
<li><strong>可配置进度条</strong>: 支持显示&#x2F;隐藏进度条</li>
<li><strong>自定义延迟</strong>: 可配置长按触发延迟时间</li>
<li><strong>移动端适配</strong>: 完整的触摸事件支持</li>
<li><strong>UI&#x2F;UX优化</strong>: 长按提示、视觉反馈等</li>
</ul>
<h4 id="版本3-0-加载优化"><a href="#版本3-0-加载优化" class="headerlink" title="版本3.0 - 加载优化"></a>版本3.0 - 加载优化</h4><ul>
<li><strong>多重初始化</strong>: 解决首次加载适配问题</li>
<li><strong>动态内容支持</strong>: MutationObserver监听DOM变化</li>
<li><strong>性能优化</strong>: 防重复初始化、错误处理</li>
<li><strong>稳定性提升</strong>: 多种加载时机适配</li>
</ul>
<h3 id="1-3-功能模块详解"><a href="#1-3-功能模块详解" class="headerlink" title="1.3 功能模块详解"></a>1.3 功能模块详解</h3><h4 id="1-3-1-核心播放引擎"><a href="#1-3-1-核心播放引擎" class="headerlink" title="1.3.1 核心播放引擎"></a>1.3.1 核心播放引擎</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LivePhoto</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">containers</span> = [];  <span class="comment">// 存储所有实况照片容器</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();          <span class="comment">// 初始化功能</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>作用</strong>: 管理所有实况照片实例，提供统一的初始化和控制接口。</p>
<h4 id="1-3-2-智能封面系统"><a href="#1-3-2-智能封面系统" class="headerlink" title="1.3.2 智能封面系统"></a>1.3.2 智能封面系统</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">handleSmartCover</span>(<span class="params">container, video, stillImage</span>) &#123;</span><br><span class="line">  <span class="comment">// 自动提取视频首帧作为封面</span></span><br><span class="line">  <span class="comment">// 处理视频加载失败的降级方案</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>作用</strong>: 自动提取视频首帧，确保封面图片的一致性和美观度。</p>
<h4 id="1-3-3-交互控制系统"><a href="#1-3-3-交互控制系统" class="headerlink" title="1.3.3 交互控制系统"></a>1.3.3 交互控制系统</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">bindEvents</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">playMode</span> === <span class="string">&#x27;hover&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 悬停播放逻辑</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="property">playMode</span> === <span class="string">&#x27;press&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 长按播放逻辑</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>作用</strong>: 根据配置提供不同的交互方式，适应不同使用场景。</p>
<h4 id="1-3-4-进度显示系统"><a href="#1-3-4-进度显示系统" class="headerlink" title="1.3.4 进度显示系统"></a>1.3.4 进度显示系统</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">startProgress</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!data.<span class="property">showProgress</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">// 创建和控制进度条显示</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>作用</strong>: 可配置的进度条显示，提供视觉反馈。</p>
<h2 id="2-分步安装指南"><a href="#2-分步安装指南" class="headerlink" title="2. 分步安装指南"></a>2. 分步安装指南</h2><h3 id="2-1-环境准备"><a href="#2-1-环境准备" class="headerlink" title="2.1 环境准备"></a>2.1 环境准备</h3><h4 id="2-1-1-基础环境要求"><a href="#2-1-1-基础环境要求" class="headerlink" title="2.1.1 基础环境要求"></a>2.1.1 基础环境要求</h4><ul>
<li><strong>Node.js</strong>: 版本 &gt;&#x3D; 14.0.0</li>
<li><strong>Hexo</strong>: 版本 &gt;&#x3D; 5.0.0</li>
<li><strong>AnZhiYu主题</strong>: 最新版本</li>
<li><strong>浏览器</strong>: 支持ES6+的现代浏览器</li>
</ul>
<h4 id="2-1-2-检查环境"><a href="#2-1-2-检查环境" class="headerlink" title="2.1.2 检查环境"></a>2.1.2 检查环境</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查Node.js版本</span></span><br><span class="line">node --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查Hexo版本</span></span><br><span class="line">hexo version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查主题版本</span></span><br><span class="line"><span class="built_in">cat</span> themes/anzhiyu/package.json | grep version</span><br></pre></td></tr></table></figure>

<h3 id="2-2-依赖项安装"><a href="#2-2-依赖项安装" class="headerlink" title="2.2 依赖项安装"></a>2.2 依赖项安装</h3><h4 id="2-2-1-核心依赖"><a href="#2-2-1-核心依赖" class="headerlink" title="2.2.1 核心依赖"></a>2.2.1 核心依赖</h4><p>实况照片功能基于原生JavaScript开发，无需额外安装npm包。</p>
<h4 id="2-2-2-主题依赖确认"><a href="#2-2-2-主题依赖确认" class="headerlink" title="2.2.2 主题依赖确认"></a>2.2.2 主题依赖确认</h4><p>确保AnZhiYu主题已正确安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入博客根目录</span></span><br><span class="line"><span class="built_in">cd</span> your-blog-directory</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查主题文件</span></span><br><span class="line"><span class="built_in">ls</span> themes/anzhiyu/</span><br></pre></td></tr></table></figure>

<h3 id="2-3-配置文件设置"><a href="#2-3-配置文件设置" class="headerlink" title="2.3 配置文件设置"></a>2.3 配置文件设置</h3><h4 id="2-3-1-创建相册配置文件"><a href="#2-3-1-创建相册配置文件" class="headerlink" title="2.3.1 创建相册配置文件"></a>2.3.1 创建相册配置文件</h4><p>在 <code>source/_data/album.yml</code> 中添加实况照片配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">&quot;实况照片展示&quot;</span></span><br><span class="line">  <span class="attr">path_name:</span> <span class="string">&quot;/livePhotos&quot;</span></span><br><span class="line">  <span class="attr">type:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">&quot;支持苹果Live Photo的动态展示&quot;</span></span><br><span class="line">  <span class="attr">album_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">&quot;春日樱花盛开&quot;</span></span><br><span class="line">      <span class="attr">live_photo:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">still_image:</span> <span class="string">&quot;/images/live-photos/sakura-still.jpg&quot;</span></span><br><span class="line">        <span class="attr">video:</span> <span class="string">&quot;/images/live-photos/sakura-video.mp4&quot;</span></span><br><span class="line">        <span class="attr">duration:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">play_mode:</span> <span class="string">&quot;press&quot;</span>      <span class="comment"># hover 或 press</span></span><br><span class="line">        <span class="attr">show_progress:</span> <span class="literal">false</span>     <span class="comment"># true 或 false</span></span><br><span class="line">        <span class="attr">press_delay:</span> <span class="number">300</span>        <span class="comment"># 毫秒</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">&quot;夕阳西下美景&quot;</span></span><br><span class="line">      <span class="attr">live_photo:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">still_image:</span> <span class="string">&quot;/images/live-photos/sunset-still.jpg&quot;</span></span><br><span class="line">        <span class="attr">video:</span> <span class="string">&quot;/images/live-photos/sunset-video.mp4&quot;</span></span><br><span class="line">        <span class="attr">duration:</span> <span class="number">2.5</span></span><br><span class="line">        <span class="attr">play_mode:</span> <span class="string">&quot;hover&quot;</span></span><br><span class="line">        <span class="attr">show_progress:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">press_delay:</span> <span class="number">500</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-创建页面文件"><a href="#2-3-2-创建页面文件" class="headerlink" title="2.3.2 创建页面文件"></a>2.3.2 创建页面文件</h4><p>在 <code>source/livePhotos/index.md</code> 中创建页面：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 实况照片</span><br><span class="line">date: 2024-01-15</span><br><span class="line">type: &quot;album&quot;</span><br><span class="line"><span class="section">layout: &quot;album&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<h2 id="3-完整部署流程"><a href="#3-完整部署流程" class="headerlink" title="3. 完整部署流程"></a>3. 完整部署流程</h2><h3 id="3-1-文件部署步骤"><a href="#3-1-文件部署步骤" class="headerlink" title="3.1 文件部署步骤"></a>3.1 文件部署步骤</h3><h4 id="步骤1-复制JavaScript文件"><a href="#步骤1-复制JavaScript文件" class="headerlink" title="步骤1: 复制JavaScript文件"></a>步骤1: 复制JavaScript文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将live_photo.js复制到主题js目录</span></span><br><span class="line"><span class="built_in">cp</span> live_photo.js themes/anzhiyu/source/js/</span><br></pre></td></tr></table></figure>

<h4 id="步骤2-复制CSS样式文件"><a href="#步骤2-复制CSS样式文件" class="headerlink" title="步骤2: 复制CSS样式文件"></a>步骤2: 复制CSS样式文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将live_photo.css复制到主题css目录</span></span><br><span class="line"><span class="built_in">cp</span> live_photo.css themes/anzhiyu/source/css/_extra/album/</span><br></pre></td></tr></table></figure>

<h4 id="步骤3-更新模板文件"><a href="#步骤3-更新模板文件" class="headerlink" title="步骤3: 更新模板文件"></a>步骤3: 更新模板文件</h4><p>编辑 <code>themes/anzhiyu/layout/includes/page/album_detail.pug</code>，添加实况照片支持：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">if item.live_photo &amp;&amp; item.live_photo.enable</span><br><span class="line">  .album-container-img</span><br><span class="line">    - let posterSrc = item.live_photo.poster || item.live_photo.still_image</span><br><span class="line">    - let playMode = item.live_photo.play_mode || &#x27;hover&#x27;</span><br><span class="line">    - let showProgress = item.live_photo.show_progress !== false</span><br><span class="line">    - let pressDelay = item.live_photo.press_delay || 300</span><br><span class="line">    .live-photo-container(data-duration=item.live_photo.duration data-play-mode=playMode data-show-progress=showProgress data-press-delay=pressDelay)</span><br><span class="line">      .live-photo-wrapper</span><br><span class="line">        img.live-photo-still(src=item.live_photo.still_image alt=item.content)</span><br><span class="line">        video.live-photo-video(preload=&quot;none&quot; muted loop playsinline poster=posterSrc)</span><br><span class="line">          source(src=item.live_photo.video type=&quot;video/mp4&quot;)</span><br><span class="line">        .live-photo-controls</span><br><span class="line">          .live-photo-play-btn</span><br><span class="line">            i.anzhiyufont.anzhiyu-icon-play</span><br><span class="line">          .live-photo-indicator LIVE</span><br><span class="line">          .live-photo-cover-status(style=&quot;display: none;&quot;)</span><br><span class="line">            span.cover-status-text 正在提取封面...</span><br></pre></td></tr></table></figure>

<h4 id="步骤4-更新JavaScript引入"><a href="#步骤4-更新JavaScript引入" class="headerlink" title="步骤4: 更新JavaScript引入"></a>步骤4: 更新JavaScript引入</h4><p>编辑 <code>themes/anzhiyu/layout/includes/additional-js.pug</code>，添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//- 实况照片功能</span><br><span class="line">script(async data-pjax src=&quot;/js/live_photo.js&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="3-2-资源文件准备"><a href="#3-2-资源文件准备" class="headerlink" title="3.2 资源文件准备"></a>3.2 资源文件准备</h3><h4 id="3-2-1-创建媒体文件目录"><a href="#3-2-1-创建媒体文件目录" class="headerlink" title="3.2.1 创建媒体文件目录"></a>3.2.1 创建媒体文件目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建实况照片资源目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="built_in">source</span>/images/live-photos</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-准备媒体文件"><a href="#3-2-2-准备媒体文件" class="headerlink" title="3.2.2 准备媒体文件"></a>3.2.2 准备媒体文件</h4><ul>
<li><strong>静态图片</strong>: JPG&#x2F;PNG格式，建议尺寸1080x1080或16:9</li>
<li><strong>视频文件</strong>: MP4格式，时长2-5秒，建议码率适中</li>
<li><strong>文件命名</strong>: 使用有意义的名称，如 <code>sakura-still.jpg</code> 和 <code>sakura-video.mp4</code></li>
</ul>
<h3 id="3-3-可能出现的问题及解决方案"><a href="#3-3-可能出现的问题及解决方案" class="headerlink" title="3.3 可能出现的问题及解决方案"></a>3.3 可能出现的问题及解决方案</h3><h4 id="问题1-视频无法播放"><a href="#问题1-视频无法播放" class="headerlink" title="问题1: 视频无法播放"></a>问题1: 视频无法播放</h4><p><strong>现象</strong>: 实况照片显示静态图片，但无法播放视频<br><strong>原因</strong>: 视频文件路径错误或格式不支持<br><strong>解决方案</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查文件是否存在</span></span><br><span class="line"><span class="built_in">ls</span> <span class="built_in">source</span>/images/live-photos/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查视频格式</span></span><br><span class="line">file <span class="built_in">source</span>/images/live-photos/your-video.mp4</span><br></pre></td></tr></table></figure>

<h4 id="问题2-首次加载不显示"><a href="#问题2-首次加载不显示" class="headerlink" title="问题2: 首次加载不显示"></a>问题2: 首次加载不显示</h4><p><strong>现象</strong>: 需要刷新页面才能正常显示<br><strong>原因</strong>: JavaScript初始化时机问题<br><strong>解决方案</strong>: 已在v3.0版本中修复，确保使用最新版本的live_photo.js</p>
<h4 id="问题3-移动端触摸无效"><a href="#问题3-移动端触摸无效" class="headerlink" title="问题3: 移动端触摸无效"></a>问题3: 移动端触摸无效</h4><p><strong>现象</strong>: 在移动设备上无法触发播放<br><strong>原因</strong>: 触摸事件绑定问题<br><strong>解决方案</strong>: 检查CSS中的touch-action属性设置</p>
<h4 id="问题4-进度条不显示"><a href="#问题4-进度条不显示" class="headerlink" title="问题4: 进度条不显示"></a>问题4: 进度条不显示</h4><p><strong>现象</strong>: 配置了show_progress: true但进度条不显示<br><strong>原因</strong>: CSS样式冲突或配置读取错误<br><strong>解决方案</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在浏览器控制台检查配置</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.live-photo-container&#x27;</span>).<span class="property">dataset</span>);</span><br></pre></td></tr></table></figure>

<h2 id="4-代码部署说明"><a href="#4-代码部署说明" class="headerlink" title="4. 代码部署说明"></a>4. 代码部署说明</h2><h3 id="4-1-代码结构解析"><a href="#4-1-代码结构解析" class="headerlink" title="4.1 代码结构解析"></a>4.1 代码结构解析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">themes/anzhiyu/</span><br><span class="line">├── source/</span><br><span class="line">│   ├── js/</span><br><span class="line">│   │   └── live_photo.js           # 核心JavaScript文件</span><br><span class="line">│   └── css/</span><br><span class="line">│       └── _extra/</span><br><span class="line">│           └── album/</span><br><span class="line">│               └── live_photo.css  # 样式文件</span><br><span class="line">├── layout/</span><br><span class="line">│   └── includes/</span><br><span class="line">│       ├── page/</span><br><span class="line">│       │   └── album_detail.pug    # 页面模板</span><br><span class="line">│       └── additional-js.pug       # JavaScript引入</span><br><span class="line">source/</span><br><span class="line">├── _data/</span><br><span class="line">│   └── album.yml                   # 配置文件</span><br><span class="line">├── images/</span><br><span class="line">│   └── live-photos/                # 媒体资源目录</span><br><span class="line">└── livePhotos/</span><br><span class="line">    └── index.md                    # 页面文件</span><br></pre></td></tr></table></figure>

<h3 id="4-2-关键配置参数说明"><a href="#4-2-关键配置参数说明" class="headerlink" title="4.2 关键配置参数说明"></a>4.2 关键配置参数说明</h3><h4 id="4-2-1-基础配置参数"><a href="#4-2-1-基础配置参数" class="headerlink" title="4.2.1 基础配置参数"></a>4.2.1 基础配置参数</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live_photo:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>                    <span class="comment"># 是否启用实况照片</span></span><br><span class="line">  <span class="attr">still_image:</span> <span class="string">&quot;path/to/image&quot;</span>    <span class="comment"># 静态图片路径</span></span><br><span class="line">  <span class="attr">video:</span> <span class="string">&quot;path/to/video&quot;</span>          <span class="comment"># 视频文件路径</span></span><br><span class="line">  <span class="attr">duration:</span> <span class="number">3</span>                     <span class="comment"># 播放时长(秒)</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-交互配置参数"><a href="#4-2-2-交互配置参数" class="headerlink" title="4.2.2 交互配置参数"></a>4.2.2 交互配置参数</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">play_mode:</span> <span class="string">&quot;press&quot;</span>              <span class="comment"># 播放模式: hover/press</span></span><br><span class="line"><span class="attr">show_progress:</span> <span class="literal">false</span>            <span class="comment"># 是否显示进度条</span></span><br><span class="line"><span class="attr">press_delay:</span> <span class="number">300</span>               <span class="comment"># 长按延迟(毫秒)</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-3-高级配置参数"><a href="#4-2-3-高级配置参数" class="headerlink" title="4.2.3 高级配置参数"></a>4.2.3 高级配置参数</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">poster:</span> <span class="string">&quot;path/to/poster&quot;</span>        <span class="comment"># 自定义封面(可选)</span></span><br><span class="line"><span class="attr">preload:</span> <span class="string">&quot;none&quot;</span>                <span class="comment"># 视频预加载策略</span></span><br><span class="line"><span class="attr">loop:</span> <span class="literal">true</span>                     <span class="comment"># 是否循环播放</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-JavaScript-API说明"><a href="#4-3-JavaScript-API说明" class="headerlink" title="4.3 JavaScript API说明"></a>4.3 JavaScript API说明</h3><h4 id="4-3-1-全局对象"><a href="#4-3-1-全局对象" class="headerlink" title="4.3.1 全局对象"></a>4.3.1 全局对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局实况照片对象</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">livePhoto</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动刷新所有实况照片</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="title function_">refresh</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁所有实况照片</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="title function_">destroy</span>();</span><br></pre></td></tr></table></figure>

<h4 id="4-3-2-事件监听"><a href="#4-3-2-事件监听" class="headerlink" title="4.3.2 事件监听"></a>4.3.2 事件监听</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PJAX页面切换事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="title function_">refresh</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面加载完成事件</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="title function_">refresh</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-4-CSS类名说明"><a href="#4-4-CSS类名说明" class="headerlink" title="4.4 CSS类名说明"></a>4.4 CSS类名说明</h3><h4 id="4-4-1-容器类名"><a href="#4-4-1-容器类名" class="headerlink" title="4.4.1 容器类名"></a>4.4.1 容器类名</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.live-photo-container</span>          <span class="comment">/* 主容器 */</span></span><br><span class="line"><span class="selector-class">.live-photo-wrapper</span>           <span class="comment">/* 内容包装器 */</span></span><br><span class="line"><span class="selector-class">.live-photo-still</span>             <span class="comment">/* 静态图片 */</span></span><br><span class="line"><span class="selector-class">.live-photo-video</span>             <span class="comment">/* 视频元素 */</span></span><br><span class="line"><span class="selector-class">.live-photo-controls</span>          <span class="comment">/* 控制元素容器 */</span></span><br></pre></td></tr></table></figure>

<h4 id="4-4-2-控制元素类名"><a href="#4-4-2-控制元素类名" class="headerlink" title="4.4.2 控制元素类名"></a>4.4.2 控制元素类名</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.live-photo-play-btn</span>          <span class="comment">/* 播放按钮 */</span></span><br><span class="line"><span class="selector-class">.live-photo-indicator</span>         <span class="comment">/* LIVE标识 */</span></span><br><span class="line"><span class="selector-class">.live-photo-progress</span>          <span class="comment">/* 进度条 */</span></span><br><span class="line"><span class="selector-class">.live-photo-cover-status</span>      <span class="comment">/* 封面状态提示 */</span></span><br></pre></td></tr></table></figure>

<h4 id="4-4-3-状态类名"><a href="#4-4-3-状态类名" class="headerlink" title="4.4.3 状态类名"></a>4.4.3 状态类名</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.playing</span>                      <span class="comment">/* 播放状态 */</span></span><br><span class="line"><span class="selector-class">.loading</span>                      <span class="comment">/* 加载状态 */</span></span><br><span class="line"><span class="selector-class">.error</span>                        <span class="comment">/* 错误状态 */</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-测试和验证方法"><a href="#4-5-测试和验证方法" class="headerlink" title="4.5 测试和验证方法"></a>4.5 测试和验证方法</h3><h4 id="4-5-1-功能测试清单"><a href="#4-5-1-功能测试清单" class="headerlink" title="4.5.1 功能测试清单"></a>4.5.1 功能测试清单</h4><ul>
<li><input disabled="" type="checkbox"> 静态图片正常显示</li>
<li><input disabled="" type="checkbox"> 悬停&#x2F;长按触发播放</li>
<li><input disabled="" type="checkbox"> 视频播放流畅</li>
<li><input disabled="" type="checkbox"> 进度条显示正确</li>
<li><input disabled="" type="checkbox"> 移动端触摸正常</li>
<li><input disabled="" type="checkbox"> 页面切换后功能正常</li>
<li><input disabled="" type="checkbox"> 多个实况照片同时工作</li>
</ul>
<h4 id="4-5-2-性能测试"><a href="#4-5-2-性能测试" class="headerlink" title="4.5.2 性能测试"></a>4.5.2 性能测试</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查内存使用</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(performance.<span class="property">memory</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查加载时间</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;livePhotoInit&#x27;</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="title function_">refresh</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;livePhotoInit&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="4-5-3-兼容性测试"><a href="#4-5-3-兼容性测试" class="headerlink" title="4.5.3 兼容性测试"></a>4.5.3 兼容性测试</h4><ul>
<li><strong>桌面端</strong>: Chrome 80+, Firefox 75+, Safari 13+, Edge 80+</li>
<li><strong>移动端</strong>: iOS Safari 13+, Chrome Mobile 80+, Samsung Internet 12+</li>
</ul>
<h4 id="4-5-4-调试方法"><a href="#4-5-4-调试方法" class="headerlink" title="4.5.4 调试方法"></a>4.5.4 调试方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启调试模式</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="property">debug</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看容器信息</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">livePhoto</span>.<span class="property">containers</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查配置读取</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.live-photo-container&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">container</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;配置:&#x27;</span>, container.<span class="property">dataset</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="5-高级配置和自定义"><a href="#5-高级配置和自定义" class="headerlink" title="5. 高级配置和自定义"></a>5. 高级配置和自定义</h2><h3 id="5-1-自定义样式"><a href="#5-1-自定义样式" class="headerlink" title="5.1 自定义样式"></a>5.1 自定义样式</h3><h4 id="5-1-1-修改进度条样式"><a href="#5-1-1-修改进度条样式" class="headerlink" title="5.1.1 修改进度条样式"></a>5.1.1 修改进度条样式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.live-photo-progress</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#ff6b6b</span>, <span class="number">#4ecdc4</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-2-自定义长按提示"><a href="#5-1-2-自定义长按提示" class="headerlink" title="5.1.2 自定义长按提示"></a>5.1.2 自定义长按提示</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.live-photo-container</span><span class="selector-attr">[data-play-mode=<span class="string">&quot;press&quot;</span>]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;长按播放&quot;</span>;</span><br><span class="line">  <span class="comment">/* 自定义样式 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-扩展功能开发"><a href="#5-2-扩展功能开发" class="headerlink" title="5.2 扩展功能开发"></a>5.2 扩展功能开发</h3><h4 id="5-2-1-添加音频支持"><a href="#5-2-1-添加音频支持" class="headerlink" title="5.2.1 添加音频支持"></a>5.2.1 添加音频支持</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在setupLivePhoto方法中添加</span></span><br><span class="line"><span class="keyword">const</span> audio = container.<span class="title function_">querySelector</span>(<span class="string">&#x27;.live-photo-audio&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (audio) &#123;</span><br><span class="line">  data.<span class="property">audio</span> = audio;</span><br><span class="line">  <span class="comment">// 同步音频播放</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-2-添加全屏播放"><a href="#5-2-2-添加全屏播放" class="headerlink" title="5.2.2 添加全屏播放"></a>5.2.2 添加全屏播放</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加全屏播放功能</span></span><br><span class="line"><span class="title function_">fullscreenPlay</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">video</span>.<span class="property">requestFullscreen</span>) &#123;</span><br><span class="line">    data.<span class="property">video</span>.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-维护和更新"><a href="#6-维护和更新" class="headerlink" title="6. 维护和更新"></a>6. 维护和更新</h2><h3 id="6-1-版本更新流程"><a href="#6-1-版本更新流程" class="headerlink" title="6.1 版本更新流程"></a>6.1 版本更新流程</h3><ol>
<li>备份现有文件</li>
<li>下载新版本文件</li>
<li>对比配置差异</li>
<li>更新文件并测试</li>
<li>部署到生产环境</li>
</ol>
<h3 id="6-2-常见维护任务"><a href="#6-2-常见维护任务" class="headerlink" title="6.2 常见维护任务"></a>6.2 常见维护任务</h3><ul>
<li>定期检查媒体文件完整性</li>
<li>监控页面加载性能</li>
<li>更新浏览器兼容性</li>
<li>优化媒体文件大小</li>
</ul>
<h3 id="6-3-故障排除工具"><a href="#6-3-故障排除工具" class="headerlink" title="6.3 故障排除工具"></a>6.3 故障排除工具</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实况照片诊断工具</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">diagnoseLivePhoto</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> containers = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.live-photo-container&#x27;</span>);</span><br><span class="line">  containers.<span class="title function_">forEach</span>(<span class="function">(<span class="params">container, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`容器 <span class="subst">$&#123;index&#125;</span>:`</span>, &#123;</span><br><span class="line">      <span class="attr">initialized</span>: container.<span class="property">dataset</span>.<span class="property">livePhotoInitialized</span>,</span><br><span class="line">      <span class="attr">config</span>: container.<span class="property">dataset</span>,</span><br><span class="line">      <span class="attr">video</span>: container.<span class="title function_">querySelector</span>(<span class="string">&#x27;.live-photo-video&#x27;</span>),</span><br><span class="line">      <span class="attr">image</span>: container.<span class="title function_">querySelector</span>(<span class="string">&#x27;.live-photo-still&#x27;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>实况照片功能为AnZhiYu主题提供了丰富的媒体展示能力，通过合理的配置和部署，可以为用户带来优秀的视觉体验。本文档涵盖了从基础安装到高级自定义的完整流程，确保开发者能够顺利部署和维护该功能。</p>
<p>如有问题，请参考故障排除章节或查看项目的GitHub仓库获取最新信息。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F" title="头像" alt="头像"></a><div class="post-copyright__author_name">John Doe</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/')">实况照片功能完整实现文档</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=实况照片功能完整实现文档&amp;url=http://example.com/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">🐱</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>实况照片<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/JavaScript/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaScript<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/Hexo/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Hexo<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/AnZhiYu%E4%B8%BB%E9%A2%98/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>AnZhiYu主题<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">实况照片功能说明</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/01/20/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%A2%9E%E5%BC%BA%E8%A7%86%E8%A7%89%E7%89%B9%E6%95%88%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" title="实况照片增强视觉特效技术文档"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-01-20</div><div class="title">实况照片增强视觉特效技术文档</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/%E5%A4%B4%E5%83%8F" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3"><span class="toc-number">1.</span> <span class="toc-text">实况照片功能完整实现文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1. 功能概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 项目背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%8A%9F%E8%83%BD%E6%BC%94%E8%BF%9B%E5%8E%86%E7%A8%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 功能演进历程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC1-0-%E5%9F%BA%E7%A1%80%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">版本1.0 - 基础实况照片功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC2-0-%E9%95%BF%E6%8C%89%E6%92%AD%E6%94%BE%E4%BC%98%E5%8C%96"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">版本2.0 - 长按播放优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC3-0-%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">版本3.0 - 加载优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 功能模块详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-%E6%A0%B8%E5%BF%83%E6%92%AD%E6%94%BE%E5%BC%95%E6%93%8E"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1.3.1 核心播放引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-%E6%99%BA%E8%83%BD%E5%B0%81%E9%9D%A2%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">1.3.2 智能封面系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-%E4%BA%A4%E4%BA%92%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">1.3.3 交互控制系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-4-%E8%BF%9B%E5%BA%A6%E6%98%BE%E7%A4%BA%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">1.3.4 进度显示系统</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%86%E6%AD%A5%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97"><span class="toc-number">1.2.</span> <span class="toc-text">2. 分步安装指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.1 基础环境要求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%A3%80%E6%9F%A5%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2.1.2 检查环境</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%BE%9D%E8%B5%96%E9%A1%B9%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 依赖项安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E6%A0%B8%E5%BF%83%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1 核心依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E4%B8%BB%E9%A2%98%E4%BE%9D%E8%B5%96%E7%A1%AE%E8%AE%A4"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2.2.2 主题依赖确认</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 配置文件设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%86%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">2.3.1 创建相册配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2.3.2 创建页面文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%8C%E6%95%B4%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">3. 完整部署流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 文件部署步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A41-%E5%A4%8D%E5%88%B6JavaScript%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">步骤1: 复制JavaScript文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A42-%E5%A4%8D%E5%88%B6CSS%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">步骤2: 复制CSS样式文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A43-%E6%9B%B4%E6%96%B0%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">步骤3: 更新模板文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A44-%E6%9B%B4%E6%96%B0JavaScript%E5%BC%95%E5%85%A5"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">步骤4: 更新JavaScript引入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%87%86%E5%A4%87"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 资源文件准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E5%88%9B%E5%BB%BA%E5%AA%92%E4%BD%93%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">3.2.1 创建媒体文件目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E5%87%86%E5%A4%87%E5%AA%92%E4%BD%93%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">3.2.2 准备媒体文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 可能出现的问题及解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%981-%E8%A7%86%E9%A2%91%E6%97%A0%E6%B3%95%E6%92%AD%E6%94%BE"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">问题1: 视频无法播放</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%982-%E9%A6%96%E6%AC%A1%E5%8A%A0%E8%BD%BD%E4%B8%8D%E6%98%BE%E7%A4%BA"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">问题2: 首次加载不显示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%983-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%A7%A6%E6%91%B8%E6%97%A0%E6%95%88"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">问题3: 移动端触摸无效</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%984-%E8%BF%9B%E5%BA%A6%E6%9D%A1%E4%B8%8D%E6%98%BE%E7%A4%BA"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">问题4: 进度条不显示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BB%A3%E7%A0%81%E9%83%A8%E7%BD%B2%E8%AF%B4%E6%98%8E"><span class="toc-number">1.4.</span> <span class="toc-text">4. 代码部署说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 代码结构解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 关键配置参数说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">4.2.1 基础配置参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E4%BA%A4%E4%BA%92%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">4.2.2 交互配置参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">4.2.3 高级配置参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-JavaScript-API%E8%AF%B4%E6%98%8E"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 JavaScript API说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">4.3.1 全局对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">4.3.2 事件监听</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-CSS%E7%B1%BB%E5%90%8D%E8%AF%B4%E6%98%8E"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 CSS类名说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E5%AE%B9%E5%99%A8%E7%B1%BB%E5%90%8D"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">4.4.1 容器类名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E6%8E%A7%E5%88%B6%E5%85%83%E7%B4%A0%E7%B1%BB%E5%90%8D"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">4.4.2 控制元素类名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-%E7%8A%B6%E6%80%81%E7%B1%BB%E5%90%8D"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">4.4.3 状态类名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E6%B5%8B%E8%AF%95%E5%92%8C%E9%AA%8C%E8%AF%81%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 测试和验证方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-1-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%95"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">4.5.1 功能测试清单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.5.2.</span> <span class="toc-text">4.5.2 性能测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-3-%E5%85%BC%E5%AE%B9%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.5.3.</span> <span class="toc-text">4.5.3 兼容性测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-4-%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.5.4.</span> <span class="toc-text">4.5.4 调试方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">1.5.</span> <span class="toc-text">5. 高级配置和自定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 自定义样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E4%BF%AE%E6%94%B9%E8%BF%9B%E5%BA%A6%E6%9D%A1%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">5.1.1 修改进度条样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%BF%E6%8C%89%E6%8F%90%E7%A4%BA"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">5.1.2 自定义长按提示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 扩展功能开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-%E6%B7%BB%E5%8A%A0%E9%9F%B3%E9%A2%91%E6%94%AF%E6%8C%81"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">5.2.1 添加音频支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-%E6%B7%BB%E5%8A%A0%E5%85%A8%E5%B1%8F%E6%92%AD%E6%94%BE"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">5.2.2 添加全屏播放</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%B4%E6%8A%A4%E5%92%8C%E6%9B%B4%E6%96%B0"><span class="toc-number">1.6.</span> <span class="toc-text">6. 维护和更新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 版本更新流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%B8%B8%E8%A7%81%E7%BB%B4%E6%8A%A4%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 常见维护任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4%E5%B7%A5%E5%85%B7"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 故障排除工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">7. 总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/" title="实况照片功能完整实现文档">实况照片功能完整实现文档</a><time datetime="2025-09-14T14:22:22.000Z" title="发表于 2025-09-14 22:22:22">2025-09-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E/" title="实况照片功能说明">实况照片功能说明</a><time datetime="2025-09-14T14:22:00.000Z" title="发表于 2025-09-14 22:22:00">2025-09-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/14/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87%E9%95%BF%E6%8C%89%E6%92%AD%E6%94%BE%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" title="实况照片长按播放功能技术文档">实况照片长按播放功能技术文档</a><time datetime="2025-09-14T14:22:00.000Z" title="发表于 2025-09-14 22:22:00">2025-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/14/%E5%BD%A2%E5%BC%8F%E4%B8%8E%E6%94%BF%E7%AD%96/" title="23-24-2级《形式与政策》-题库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/DM_20231104142859_001.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="23-24-2级《形式与政策》-题库"/></a><div class="content"><a class="title" href="/2024/06/14/%E5%BD%A2%E5%BC%8F%E4%B8%8E%E6%94%BF%E7%AD%96/" title="23-24-2级《形式与政策》-题库">23-24-2级《形式与政策》-题库</a><time datetime="2024-06-14T06:00:00.000Z" title="发表于 2024-06-14 14:00:00">2024-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/10/2024%E5%B9%B4%E4%B8%93%E4%B8%9A%E8%8B%B1%E8%AF%AD/" title="23-24-2级《计算机基础》-题库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://wenroumao.oss-cn-beijing.aliyuncs.com/img/DM_20231215150634_005.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="23-24-2级《计算机基础》-题库"/></a><div class="content"><a class="title" href="/2024/06/10/2024%E5%B9%B4%E4%B8%93%E4%B8%9A%E8%8B%B1%E8%AF%AD/" title="23-24-2级《计算机基础》-题库">23-24-2级《计算机基础》-题库</a><time datetime="2024-06-10T13:00:00.000Z" title="发表于 2024-06-10 21:00:00">2024-06-10</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="John Doe" target="_blank">John Doe</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/null" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=2887240194&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/1-X/" style="font-size: 0.88rem;">1+X<sup>3</sup></a><a href="/tags/1x/" style="font-size: 0.88rem;">1x<sup>3</sup></a><a href="/tags/AnZhiYu%E4%B8%BB%E9%A2%98/" style="font-size: 0.88rem;">AnZhiYu主题<sup>1</sup></a><a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 0.88rem;">CSS动画<sup>1</sup></a><a href="/tags/CSS%E7%89%B9%E6%95%88/" style="font-size: 0.88rem;">CSS特效<sup>1</sup></a><a href="/tags/DW/" style="font-size: 0.88rem;">DW<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>2</sup></a><a href="/tags/Typora/" style="font-size: 0.88rem;">Typora<sup>1</sup></a><a href="/tags/%E5%85%89%E7%BA%BF%E6%8A%98%E5%B0%84/" style="font-size: 0.88rem;">光线折射<sup>1</sup></a><a href="/tags/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E4%B8%8E%E8%A1%A5%E7%A0%81/" style="font-size: 0.88rem;">原码、反码与补码<sup>1</sup></a><a href="/tags/%E5%AE%9E%E5%86%B5%E7%85%A7%E7%89%87/" style="font-size: 0.88rem;">实况照片<sup>2</sup></a><a href="/tags/%E7%8E%BB%E7%92%83%E6%9D%90%E8%B4%A8/" style="font-size: 0.88rem;">玻璃材质<sup>1</sup></a><a href="/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/" style="font-size: 0.88rem;">用户体验<sup>2</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1/" style="font-size: 0.88rem;">网页设计<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C/" style="font-size: 0.88rem;">视觉效果<sup>1</sup></a><a href="/tags/%E8%A7%86%E8%A7%89%E7%89%B9%E6%95%88/" style="font-size: 0.88rem;">视觉特效<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">计算机基础<sup>5</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 0.88rem;">软件<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="2887240194" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"><a class="tag-list" href="/tags/%E5%89%8D%E7%AB%AF" title="前端">前端</a><a class="tag-list" href="/tags/Hexo" title="Hexo">Hexo</a></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=2887240194&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("10/01/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 John Doe 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("10/01/2023 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script async data-pjax src="/js/live_photo.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="themes/anzhiyu/source/js/f12.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html><script>// 优化的防开发者工具检测
(function() {
  let devtoolsOpen = false;
  let threshold = 160;
  
  // 方法1: 检测窗口尺寸变化
  function detectBySize() {
    if (window.outerHeight - window.innerHeight > threshold || 
        window.outerWidth - window.innerWidth > threshold) {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        showWarning();
      }
    }
  }
  
  // 方法2: 检测调试器
  function detectByDebugger() {
    let start = new Date();
    debugger;
    let end = new Date();
    if (end - start > 100) {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        showWarning();
      }
    }
  }
  
  // 方法3: 检测console访问
  function detectByConsole() {
    let devtools = new Date();
    devtools.toString = function() {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        showWarning();
      }
    };
    console.log('%c', devtools);
  }
  
  // 显示警告并重新加载
  function showWarning() {
    alert('检测到开发者工具已打开，请关闭后继续访问！');
    window.location.reload();
  }
  
  // 立即检测
  detectByConsole();
  
  // 持续监控
  setInterval(detectBySize, 500);
  setInterval(detectByDebugger, 1000);
  setInterval(detectByConsole, 2000);
  
  // 监听键盘事件
  document.addEventListener('keydown', function(e) {
    // F12 或 Ctrl+Shift+I 或 Ctrl+Shift+J 或 Ctrl+U
    if (e.keyCode === 123 || 
        (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
        (e.ctrlKey && e.keyCode === 85)) {
      e.preventDefault();
      showWarning();
      return false;
    }
  });
  
  // 右键菜单 - 保留用户正常使用权限
   document.addEventListener('contextmenu', function(e) {
     // 不禁用右键菜单，用户可以正常使用右键功能
     // 只通过其他方式检测开发者工具
   });
})();

 if theme.background
 if page.background
   #web_bg(style=`background:`+ page.background + `;background-attachment: local;background-position: center;background-size: cover;background-repeat: no-repeat;`)
 else
   #web_bg</script>