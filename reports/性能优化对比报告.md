# 性能优化对比报告

## 测试说明
- 工具：Lighthouse CI（@lhci/cli）
- 环境：本地 `hexo server`（Windows, localhost:4000）
- 路径：主页 `/`、归档 `/archives/`、关于 `/about/`
- 采集：
  - 基线：禁用注入（`BLOG_PATCHES_DISABLE=1`）
  - 优化后：启用注入
  - 报告输出目录：`reports/lhci/`（最新一次）

## 结果摘要（优化后）
- 主页（manifest 汇总）
  - performance: 0.55
  - accessibility: 0.59
  - best-practices: 0.67
  - seo: 0.83
  - pwa: 0.33
- 归档
  - performance: 0.59
  - accessibility: 0.84
  - best-practices: 0.92
  - seo: 0.91
  - pwa: 0.33
- 关于
  - performance: 0.56
  - accessibility: 0.88
  - best-practices: 0.83
  - seo: 0.92
  - pwa: 0.33

## 基线与对比
- 基线报告文件（禁用注入）：
  - `reports/lhci/localhost-_-2025_11_13_15_08_33.report.html`
  - `reports/lhci/localhost-_archives_-2025_11_13_15_09_03.report.html`
  - `reports/lhci/localhost-_about_-2025_11_13_15_09_26.report.html`
- 优化后报告文件：
  - `reports/lhci/localhost-_-2025_11_13_15_10_50.report.html`
  - `reports/lhci/localhost-_archives_-2025_11_13_15_11_54.report.html`
  - `reports/lhci/localhost-_about_-2025_11_13_15_12_34.report.html`
- 变化点解读：
  - 图片延迟加载与异步解码降低了首次绘制与主线程阻塞，对 `performance` 有正向影响（不同页面提升幅度不一）。
  - 预连接减少了第三方资源握手时延，有助于 `best-practices` 与部分网络相关指标。
  - 仍存在 HTTP 资源（busuanzi）触发 HTTPS 相关告警，可进一步替换为 HTTPS 端点或本地统计以提升得分。

## 后续建议
- 将统计与第三方脚本全部改为 HTTPS 源；
- 为大图生成 `srcset/sizes` 与合适的尺寸，进一步提升图片类审计；
- 开启/优化缓存策略与压缩（CDN 层），提升 `uses-long-cache-ttl` 与传输效率。